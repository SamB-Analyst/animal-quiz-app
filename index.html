<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ugly Sweater Holiday Party!</title>

    <!-- React Production -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- html2canvas for screenshot -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

    <!-- Mobile Meta -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#DC2626">

    <style>
        body { margin: 0; padding: 0; font-family: system-ui, sans-serif; overflow-x: hidden; }
        * { box-sizing: border-box; }
        #root { min-height: 100vh; }

        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
            100% { transform: translateY(110vh) rotate(360deg); opacity: 0.8; }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(-3deg); }
            50% { transform: rotate(3deg); }
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 20px rgba(220, 38, 38, 0.5); }
            50% { box-shadow: 0 0 40px rgba(220, 38, 38, 0.8); }
        }

        .snowflake {
            position: fixed;
            top: -10vh;
            color: white;
            font-size: 1.5em;
            opacity: 0.8;
            animation: fall linear infinite;
            pointer-events: none;
            z-index: 1000;
        }

        .bounce-animation {
            animation: bounce 2s ease-in-out infinite;
        }

        .wiggle-animation {
            animation: wiggle 1s ease-in-out infinite;
        }

        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }

        .sweater-pattern {
            background: linear-gradient(45deg, #DC2626 25%, #16A34A 25%, #16A34A 50%, #DC2626 50%, #DC2626 75%, #16A34A 75%, #16A34A);
            background-size: 40px 40px;
        }

        @media print {
            .no-print { display: none; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script>
        const { useState, useEffect } = React;
        const e = React.createElement;

        const Snowflake = ({ delay, duration, left }) => {
            return e('div', {
                className: 'snowflake',
                style: {
                    left: `${left}%`,
                    animationDelay: `${delay}s`,
                    animationDuration: `${duration}s`
                }
            }, '‚ùÑÔ∏è');
        };

        const UglySweaterParty = () => {
            const [rsvpStatus, setRsvpStatus] = useState(null);
            const [guestName, setGuestName] = useState('');
            const [downloading, setDownloading] = useState(false);

            // Generate snowflakes
            const snowflakes = Array.from({ length: 30 }, (_, i) => ({
                id: i,
                delay: Math.random() * 5,
                duration: 8 + Math.random() * 7,
                left: Math.random() * 100
            }));

            const handleDownload = async () => {
                setDownloading(true);
                try {
                    const element = document.getElementById('invitation-card');
                    const canvas = await html2canvas(element, {
                        scale: 2,
                        backgroundColor: '#1e40af',
                        logging: false
                    });

                    const link = document.createElement('a');
                    link.download = 'ugly-sweater-party-invite.png';
                    link.href = canvas.toDataURL();
                    link.click();
                } catch (error) {
                    alert('Download failed. Please try taking a screenshot instead!');
                }
                setDownloading(false);
            };

            const handleShare = async () => {
                const text = `You're Invited to our Ugly Sweater Holiday Party!\n\nDate: December 6th at 3pm\nLocation: 3356 New Castle Drive\nTheme: Ugly Sweater Party\n\nPlease bring a finger food to share!\n\nSee you there!`;

                if (navigator.share) {
                    try {
                        await navigator.share({
                            title: 'Ugly Sweater Holiday Party',
                            text: text
                        });
                    } catch (error) {
                        copyToClipboard(text);
                    }
                } else {
                    copyToClipboard(text);
                }
            };

            const copyToClipboard = (text) => {
                navigator.clipboard.writeText(text).then(() => {
                    alert('Party details copied to clipboard! Paste into your text message.');
                }).catch(() => {
                    alert('Please manually copy the party details from the card.');
                });
            };

            return e('div', {
                className: 'min-h-screen bg-gradient-to-b from-blue-800 via-blue-900 to-blue-950 relative overflow-hidden'
            },
                // Snowflakes
                ...snowflakes.map(flake =>
                    e(Snowflake, {
                        key: flake.id,
                        delay: flake.delay,
                        duration: flake.duration,
                        left: flake.left
                    })
                ),

                // Main Content
                e('div', { className: 'relative z-10 min-h-screen flex items-center justify-center p-4' },
                    e('div', { className: 'max-w-2xl w-full' },
                        // Invitation Card
                        e('div', {
                            id: 'invitation-card',
                            className: 'bg-white rounded-3xl shadow-2xl overflow-hidden mb-6'
                        },
                            // Header with ugly sweater pattern
                            e('div', { className: 'sweater-pattern p-8 text-center relative' },
                                e('div', { className: 'bounce-animation inline-block text-6xl mb-4' }, 'üéÑ'),
                                e('h1', {
                                    className: 'text-5xl font-black text-white mb-2',
                                    style: { textShadow: '3px 3px 6px rgba(0,0,0,0.5)' }
                                }, 'YOU\'RE INVITED!'),
                                e('div', { className: 'wiggle-animation inline-block text-6xl mt-4' }, 'üéÖ')
                            ),

                            // Main Content
                            e('div', { className: 'p-8' },
                                // Title
                                e('div', { className: 'text-center mb-8' },
                                    e('h2', { className: 'text-4xl font-bold text-red-600 mb-2' },
                                        'Annual Holiday Party'
                                    ),
                                    e('div', { className: 'flex justify-center items-center gap-3 text-5xl mb-4' },
                                        e('span', { className: 'wiggle-animation' }, 'üß∂'),
                                        e('h3', { className: 'text-3xl font-bold text-green-600' },
                                            'Ugly Sweater Edition'
                                        ),
                                        e('span', { className: 'wiggle-animation' }, 'üß£')
                                    )
                                ),

                                // Party Details
                                e('div', { className: 'bg-gradient-to-r from-red-50 to-green-50 rounded-2xl p-6 mb-6' },
                                    e('div', { className: 'space-y-4' },
                                        // Date & Time
                                        e('div', { className: 'flex items-center gap-4' },
                                            e('div', { className: 'text-4xl' }, 'üìÖ'),
                                            e('div', null,
                                                e('p', { className: 'text-lg font-bold text-gray-800' }, 'When'),
                                                e('p', { className: 'text-xl text-red-600 font-semibold' },
                                                    'December 6th at 3:00 PM'
                                                )
                                            )
                                        ),

                                        // Location
                                        e('div', { className: 'flex items-center gap-4' },
                                            e('div', { className: 'text-4xl' }, 'üè†'),
                                            e('div', null,
                                                e('p', { className: 'text-lg font-bold text-gray-800' }, 'Where'),
                                                e('p', { className: 'text-xl text-green-600 font-semibold' },
                                                    '3356 New Castle Drive'
                                                )
                                            )
                                        ),

                                        // Theme
                                        e('div', { className: 'flex items-center gap-4' },
                                            e('div', { className: 'text-4xl bounce-animation' }, 'üéÑ'),
                                            e('div', null,
                                                e('p', { className: 'text-lg font-bold text-gray-800' }, 'Theme'),
                                                e('p', { className: 'text-xl text-purple-600 font-semibold' },
                                                    'Wear Your Ugliest Sweater!'
                                                )
                                            )
                                        ),

                                        // Food
                                        e('div', { className: 'flex items-center gap-4' },
                                            e('div', { className: 'text-4xl' }, 'üç™'),
                                            e('div', null,
                                                e('p', { className: 'text-lg font-bold text-gray-800' }, 'Bring'),
                                                e('p', { className: 'text-xl text-orange-600 font-semibold' },
                                                    'A Finger Food to Share'
                                                )
                                            )
                                        )
                                    )
                                ),

                                // Fun decorative elements
                                e('div', { className: 'text-center mb-6' },
                                    e('div', { className: 'flex justify-center gap-4 text-4xl mb-4' },
                                        e('span', { className: 'bounce-animation', style: { animationDelay: '0s' } }, 'üéÅ'),
                                        e('span', { className: 'bounce-animation', style: { animationDelay: '0.2s' } }, '‚õÑ'),
                                        e('span', { className: 'bounce-animation', style: { animationDelay: '0.4s' } }, 'üéÖ'),
                                        e('span', { className: 'bounce-animation', style: { animationDelay: '0.6s' } }, 'ü¶å'),
                                        e('span', { className: 'bounce-animation', style: { animationDelay: '0.8s' } }, '‚ùÑÔ∏è')
                                    ),
                                    e('p', { className: 'text-2xl font-bold text-red-600 mb-2' },
                                        'Get Ready to Jingle & Mingle!'
                                    ),
                                    e('p', { className: 'text-gray-600 italic' },
                                        'The uglier the sweater, the better!'
                                    )
                                ),

                                // RSVP Section
                                !rsvpStatus ? (
                                    e('div', { className: 'bg-blue-50 rounded-2xl p-6' },
                                        e('h3', { className: 'text-xl font-bold text-center text-blue-900 mb-4' },
                                            'Will you be joining us?'
                                        ),
                                        e('div', { className: 'mb-4' },
                                            e('input', {
                                                type: 'text',
                                                placeholder: 'Your Name',
                                                value: guestName,
                                                onChange: (e) => setGuestName(e.target.value),
                                                className: 'w-full p-3 rounded-xl border-2 border-blue-300 focus:border-blue-500 focus:outline-none text-lg'
                                            })
                                        ),
                                        e('div', { className: 'flex gap-3' },
                                            e('button', {
                                                onClick: () => guestName.trim() && setRsvpStatus('yes'),
                                                disabled: !guestName.trim(),
                                                className: 'flex-1 bg-green-500 text-white py-3 px-6 rounded-xl text-lg font-bold hover:bg-green-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all transform hover:scale-105'
                                            }, '‚úì Yes!'),
                                            e('button', {
                                                onClick: () => guestName.trim() && setRsvpStatus('maybe'),
                                                disabled: !guestName.trim(),
                                                className: 'flex-1 bg-yellow-500 text-white py-3 px-6 rounded-xl text-lg font-bold hover:bg-yellow-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all transform hover:scale-105'
                                            }, '? Maybe'),
                                            e('button', {
                                                onClick: () => guestName.trim() && setRsvpStatus('no'),
                                                disabled: !guestName.trim(),
                                                className: 'flex-1 bg-red-500 text-white py-3 px-6 rounded-xl text-lg font-bold hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-all transform hover:scale-105'
                                            }, '‚úó No')
                                        )
                                    )
                                ) : (
                                    e('div', { className: 'bg-green-50 rounded-2xl p-6 text-center' },
                                        e('div', { className: 'text-5xl mb-3' },
                                            rsvpStatus === 'yes' ? 'üéâ' : rsvpStatus === 'maybe' ? 'ü§î' : 'üò¢'
                                        ),
                                        e('p', { className: 'text-2xl font-bold mb-2' },
                                            rsvpStatus === 'yes'
                                                ? `Awesome, ${guestName}! Can't wait to see you!`
                                                : rsvpStatus === 'maybe'
                                                    ? `Thanks ${guestName}! Hope you can make it!`
                                                    : `Sorry you can't make it, ${guestName}!`
                                        ),
                                        e('button', {
                                            onClick: () => { setRsvpStatus(null); setGuestName(''); },
                                            className: 'mt-3 text-blue-600 font-semibold hover:underline'
                                        }, 'Change RSVP')
                                    )
                                )
                            )
                        ),

                        // Action Buttons (outside the card for download)
                        e('div', { className: 'no-print flex flex-col sm:flex-row gap-4' },
                            e('button', {
                                onClick: handleDownload,
                                disabled: downloading,
                                className: 'flex-1 bg-red-600 text-white py-4 px-6 rounded-2xl text-xl font-bold hover:bg-red-700 disabled:bg-gray-400 transition-all transform hover:scale-105 pulse-glow flex items-center justify-center gap-2'
                            },
                                downloading ? 'Preparing...' : 'üì• Download Invitation'
                            ),
                            e('button', {
                                onClick: handleShare,
                                className: 'flex-1 bg-green-600 text-white py-4 px-6 rounded-2xl text-xl font-bold hover:bg-green-700 transition-all transform hover:scale-105 pulse-glow flex items-center justify-center gap-2'
                            },
                                'üì± Share via Text'
                            )
                        ),

                        // Instructions
                        e('div', { className: 'no-print text-center mt-4 text-white text-sm' },
                            e('p', { className: 'mb-2' }, 'üí° Tip: Download the image or click share to send via text message!'),
                            e('p', null, 'On mobile, you can also take a screenshot to share directly.')
                        )
                    )
                )
            );
        };

        // Render the app
        ReactDOM.render(e(UglySweaterParty), document.getElementById('root'));
    </script>
</body>
</html>
